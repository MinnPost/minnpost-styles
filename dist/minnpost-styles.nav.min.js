/*! minnpost-styles - v0.0.1 - 2014-01-30
* https://github.com/MinnPost/minnpost-styles
* Copyright (c) 2014 ; Licensed MIT */

!function(a,b){if("undefined"!=typeof module&&module.exports&&"function"==typeof require)b(require("minnpost-styles"),require("jquery"),require("underscore"));else if("function"==typeof define&&define.amd)define("minnpost-styles.nav",["minnpost-styles","jquery","underscore"],b);else{if(!(a.MP&&a.jQuery&&a._))throw new Error("Could not find dependencies for MinnPost Styles Maps.");b(a.MP,a.jQuery,a._)}}("undefined"!=typeof window?window:this,function(a,b,c){function d(c,d){this.element=c,this.$element=b(c),this._defaults=a.nav.MPStickDefaults,this.options=b.extend({},this._defaults,d),this._name="mpStick",this._scrollEvent="scroll.mp.mpStick",this._on=!1,this.init()}function e(c,d){this.element=c,this.$element=b(c),this._defaults=a.nav.MPScrollSpyDefaults,this.options=b.extend({},this._defaults,d),this._name="mpScollSpy",this._scrollEvent="scroll.mp.mpScollSpy",this.init()}a.nav=a.nav||{},a.nav.MPStickDefaults={activeClass:"stuck top",wrapperClass:"minnpost-full-container",topPadding:0,throttle:90},d.prototype={init:function(){this.$container=void 0===this.options.container?this.$element.parent():b(this.options.container),this.elementHeight=this.$element.outerHeight(!0),this.$spacer=b("<div>").height(this.elementHeight).hide(),this.$element.after(this.$spacer),this.options.wrapperClass&&this.$element.wrapInner('<div class="'+this.options.wrapperClass+'"></div>'),this._throttledListen=c.bind(c.throttle(this.listen,this.options.throttle),this),this._throttledListen(),b(window).on(this._scrollEvent,this._throttledListen)},listen:function(){var a=this.$container.offset().top,c=a+this.$container.height(),d=b(window).scrollTop(),e=a-this.options.topPadding,f=c-this.elementHeight-this.options.topPadding-2;!this._on&&d>e&&f>d?this.on():this._on&&(e>d||d>f)&&this.off()},on:function(){this.$element.addClass(this.options.activeClass),this.options.topPadding&&this.$element.css("top",this.options.topPadding),this.$spacer.show(),this._on=!0},off:function(){this.$element.removeClass(this.options.activeClass),this.options.topPadding&&this.$element.css("top","inherit"),this.$spacer.hide(),this._on=!1},remove:function(){this.$container.off(this._scrollEvent)}},b.fn.mpStick=function(a){return this.each(function(){b.data(this,"mpStick")||b.data(this,"mpStick",new d(this,a))})},a.nav.MPScrollSpyDefaults={activeClass:"active",offset:80,throttle:200},e.prototype={init:function(){this.$listeners=this.$element.find("[data-spy-on]"),this.$targets=this.$element.find("[data-spy-me]"),this._throttledListen=c.bind(c.throttle(this.listen,this.options.throttle),this),this._throttledListen(),b(window).on(this._scrollEvent,this._throttledListen),this.$listeners.on("click",c.bind(this.gotoClick,this))},listen:function(){var a,c=this,d=b(window).scrollTop();this.$targets.each(function(){var e=b(this);e.offset().top<=d+(c.options.offset+5)&&(a=e.data("spyMe"))}),a&&(this.$listeners.removeClass(this.options.activeClass),this.$element.find('[data-spy-on="'+a+'"]').addClass(this.options.activeClass))},gotoClick:function(a){a.preventDefault();b(a.target);this.goto(b(a.target).data("spyOn"))},"goto":function(a){var c=this.$element.find('[data-spy-me="'+a+'"]'),d=c.offset().top;b("html, body").animate({scrollTop:d-this.options.offset},600)},remove:function(){this.$container.off(this._scrollEvent)}},b.fn.mpScrollSpy=function(a){return this.each(function(){b.data(this,"mpScrollSpy")||b.data(this,"mpScrollSpy",new e(this,a))})}});